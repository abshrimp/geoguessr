(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{7276:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6993)}])},6632:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(4848),s=n(6540);let a=e=>{let{setCurrentScreen:t,saveData:n,func:a}=e,[i,l]=(0,s.useState)(""),[o,c]=(0,s.useState)(""),d=async()=>{n.name=i,n.pass=o,a.getData(),t("play")};return(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"ログイン"}),(0,r.jsx)("input",{type:"text",placeholder:"ユーザー名",value:i,onChange:e=>l(e.target.value)}),(0,r.jsx)("input",{type:"password",placeholder:"パスワード",value:o,onChange:e=>c(e.target.value)}),(0,r.jsx)("button",{onClick:d,children:"ログイン"}),(0,r.jsx)("button",{onClick:()=>t("register"),children:"新規登録"})]})}},6791:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(4848),s=n(3368),a=n.n(s),i=n(8133),l=n.n(i);let o=e=>{let{setCurrentScreen:t,saveData:n,func:s}=e,i=0,o=null,c=e=>document.getElementById(e),d=()=>{var e=new XMLHttpRequest;e.open("HEAD","#",!1),e.send(null),i=new Date(e.getResponseHeader("Date"))-new Date},u=e=>{let t=Math.floor(e/3600),n=Math.floor(e%3600/60),r;r=t<100?"00".concat(t).slice(-2):t;let s="00".concat(n).slice(-2),a="00".concat(e%60).slice(-2);return 0!==t?"".concat(r,":").concat(s,":").concat(a):"".concat(s,":").concat(a)},h=e=>{let t=document.createElement("style");t.textContent=e,document.head.appendChild(t)},p=e=>{o?map.removeLayer(o):(c("guess").innerText="GUESS",c("guess").disabled=null,h(":root{--color3:var(--color1);--color4:var(--color2);}")),o=L.marker(e.latlng).addTo(map)},m=e=>{e.setView([35.4,136],5),e.on("click",p),L.tileLayer("https://www.google.com/maps/vt?pb=!1m5!1m4!1i{z}!2i{x}!3i{y}!4i256!2m3!1e0!2sm!3i693439125!3m12!2sja!3sJP!5e289!12m4!1e68!2m2!1sset!2sRoadmap!12m3!1e37!2m1!1ssmartmaps!4e0!5m1!5f2",{attribution:"\xa9️ <a href='https://www.google.com/maps/' target='_blank'>Google</a>",maxZoom:20,maxNativeZoom:20}).addTo(e),L.control.zoom({position:"bottomleft"}).addTo(e),new ResizeObserver(()=>{e.invalidateSize()}).observe(e._container)},x=()=>{d(),c("view").src="https://www.google.com/maps/embed?pb=!4v0!6m8!1m7!1s"+n.p_id+"!2m2!1d0!2d0!3f0!4f0!5f0"},g=()=>{let e=L.map("mapcontainer",{zoomControl:!1});console.log(e),m(e),d(),c("nav_points").innerText="POINTS : "+n.points,c("nav_count").innerText=n.stage+" / 5",e.setView([35.4,136],5);let t=new Date().getTime()+i,r=!1;x(),setInterval(()=>{if(c("view").setAttribute("style","margin-top: -70px !important;"),t){if(0==n.limit){c("timer").innerText="∞";return}let e=Math.floor(n.limit-(new Date().getTime()+i-t)/1e3);e<0?r||(r=!0,guess()):c("timer").innerText=u(e)}},1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a(),{children:(0,r.jsx)("link",{rel:"stylesheet",href:"https://unpkg.com/leaflet@1.3.0/dist/leaflet.css"})}),(0,r.jsx)(l(),{src:"https://unpkg.com/leaflet@1.3.0/dist/leaflet.js",strategy:"afterInteractive",onLoad:()=>{g()}}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{id:"street",children:(0,r.jsx)("iframe",{id:"view",src:null,style:{border:0},loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})}),(0,r.jsxs)("div",{id:"map",children:[(0,r.jsxs)("div",{id:"size",children:[(0,r.jsx)("button",{title:"地図を縮小",id:"min",children:"↙︎"}),(0,r.jsx)("button",{title:"地図を展開",id:"max",children:"↗︎"}),(0,r.jsx)("button",{title:"地図のサイズを固定",id:"lock",children:"\uD83D\uDD12"})]}),(0,r.jsx)("div",{id:"mapcontainer"}),(0,r.jsx)("button",{id:"guess",className:"buttonRound",disabled:!0,children:"PLACE YOUR PIN ON THE MAP"})]}),(0,r.jsx)("div",{id:"go_to_start",children:(0,r.jsx)("button",{title:"スタートに戻る",id:"back",children:(0,r.jsx)("span",{children:"⚐"})})}),(0,r.jsx)("div",{id:"timer"}),(0,r.jsxs)("div",{id:"navi",children:[(0,r.jsx)("button",{id:"back_home",children:"←"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{children:"FreeGuessr JP"}),(0,r.jsx)("span",{id:"nav_count",children:"1 / 5"}),(0,r.jsx)("span",{id:"nav_points",children:"POINTS : 0"})]})]})]})]})}},2564:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(4848),s=n(6540);let a=e=>{let{onRegisterSuccess:t}=e,[n,a]=(0,s.useState)(""),[i,l]=(0,s.useState)(""),[o,c]=(0,s.useState)(""),d=async()=>{let e=await fetch("/api/auth",{method:"POST",body:JSON.stringify({action:"register",username:n,password:i})}),r=await e.json();e.ok?t():c(r.message)};return(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"新規登録"}),(0,r.jsx)("input",{type:"text",placeholder:"ユーザー名",value:n,onChange:e=>a(e.target.value)}),(0,r.jsx)("input",{type:"password",placeholder:"パスワード",value:i,onChange:e=>l(e.target.value)}),(0,r.jsx)("button",{onClick:d,children:"登録"}),o&&(0,r.jsx)("p",{children:o})]})}},1332:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4848);n(6540);let s=e=>{let{score:t}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"ゲームの結果"}),(0,r.jsxs)("p",{children:["スコア: ",t||0]})]})}},5144:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(4848),s=n(6540);let a=e=>{let{onSettingsSaved:t}=e,[n,a]=(0,s.useState)("light"),[i,l]=(0,s.useState)("");return(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"設定"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"ユーザー名"}),(0,r.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"テーマ"}),(0,r.jsxs)("select",{value:n,onChange:e=>a(e.target.value),children:[(0,r.jsx)("option",{value:"light",children:"ライト"}),(0,r.jsx)("option",{value:"dark",children:"ダーク"})]})]}),(0,r.jsx)("button",{onClick:()=>{t({username:i,theme:n})},children:"設定を保存"})]})}},6993:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n(4848),s=n(6540),a=n(6632),i=n(2564),l=n(5144),o=n(6791),c=n(1332);let d=()=>{let[e,t]=(0,s.useState)("login"),n="https://script.google.com/macros/s/AKfycbw4PthIRJLo1-aQ2FDHRN3UHDS-Iug5kHFreJipf0b3Aaxc5iu8NT37mtgelPS17a2rCg/exec",d=()=>{function e(){let t=["2440mWGZGQ","1122490aEhwHP","8RlzJpe","reverse","join","split","fromCharCode","1635876tlxkmE","40889jqiWGU","9755CmLUgp","275211lZwvyY","2369523aHeeGT","181622MEBSAO","floor","54sAIYxk","charCodeAt","map"];return(e=function(){return t})()}function t(n,r){let s=e();return(t=function(e,t){return s[e-=405]})(n,r)}!function(e,n){let r=t,s=e();for(;;)try{if(parseInt(r(410))/1+parseInt(r(409))/2+parseInt(r(413))/3+-parseInt(r(419))/4*(parseInt(r(411))/5)+parseInt(r(416))/6*(parseInt(r(414))/7)+-parseInt(r(421))/8*(-parseInt(r(412))/9)+parseInt(r(420))/10==834900)break;s.push(s.shift())}catch(e){s.push(s.shift())}}(e,0);let n={};return n.e=e=>{let n=t,r=Math[n(415)](70*Math.random()+10);return encodeURIComponent(btoa(encodeURIComponent(JSON.stringify(e))[n(407)]("")[n(418)](e=>String[n(408)]((e.charCodeAt(0)-33+r)%92+33)).reverse()[n(406)]("")))},n.d=e=>{let n=t,r=atob(decodeURIComponent(e));return JSON.parse(decodeURIComponent(r.split("")[n(405)]()[n(418)](e=>String[n(408)]((e.charCodeAt(0)-(r[0][n(417)](0)+24)%92+59)%92+33))[n(406)]("")))},n};console.log(d().e({action:"login",name:"えび",pass:"abshrimp"}));let u=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=await fetch(e<2?"http://abshrimp.shop/streetview.cgi":"https://ikegamishinkai.shop/streetview.cgi",{method:"GET"}),n=await t.json();return t.ok?n:e<3?await u(e+1):void(alert("エラーが発生しました\nもう一度お試しください\uD83D\uDE47"),window.location.reload())},h={setAll:e=>{for(let t in e)h[t]=e[t]}},p={};return p.getData=async()=>{let e=d.e({action:"login",name:h.name,pass:h.pass});console.log(e);let t=await fetch(n+"?p="+e);if(t.ok){let e=await t.text();h.setAll(d.d(e))}else alert("エラーが発生しました")},p.post=async()=>{let e=await fetch(n,{method:"POST",body:d.e(Object.fromEntries(Object.entries(h).filter(e=>{let[t,n]=e;return"function"!=typeof n})))}),t=await e.json();if(e.ok)return t;alert(t.message)},p.start=async()=>{h.current_count=Math.floor(h.current_count+1),[h.p_id,h.lat,h.lng]=await u(),t("play"),await (void 0).post()},setInterval(()=>{},100),(0,r.jsx)("div",{children:(()=>{switch(e){case"login":return(0,r.jsx)(a.default,{setCurrentScreen:t,saveData:h,func:p});case"register":return(0,r.jsx)(i.default,{setCurrentScreen:t});case"settings":return(0,r.jsx)(l.default,{onSettingsSaved:handleSettingsSaved});case"play":return(0,r.jsx)(o.default,{setCurrentScreen:t,saveData:h,func:p});case"result":return(0,r.jsx)(c.default,{score:score});default:return(0,r.jsx)(a.default,{setCurrentScreen:t,onLoginSuccess:()=>t("play")})}})()})}},3368:(e,t,n)=>{e.exports=n(6085)},8133:(e,t,n)=>{e.exports=n(7610)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(7276)),_N_E=e.O()}]);